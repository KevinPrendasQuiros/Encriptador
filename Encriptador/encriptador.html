<!DOCTYPE html>

<html lang="es">

    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">

        <title>Encriptador Alura</title>

        <link rel="stylesheet" href="reset.css">
        <link rel="stylesheet" href="style.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400&display=swap" rel="stylesheet">

    </head>

    <body>
        <header>

        </header>
        <main>
            <div class="zonaLogo">
                <img src="imagenes/Vector_a.png" class="logoPrincipal">
            </div>

            <section>
                <label for="mensaje"></label>
                <textarea cols="70" rows="10" id="mensaje" class="input-padron" placeholder="Ingrese el texto aquí" oninput='this.style.height = "";this.style.height = this.scrollHeight + "px"'></textarea>
            </section>

            <div class="zonaIndicaciones">
                <p class="indicaciones">&#9432 Solo letras minúsculas y sin acentos</p>
            </div>
            
            <section class="zonaBotones">
                <button type="button" onclick="encriptar()" class="botonAzul">Encriptar</button>
                <button type="button" onclick="desencriptar()" class="botonGris">Desencriptar</button>
            </section>
    
            <section class="rectangulo">
                <div id="zonaTransformacion">
                    <img src="imagenes/Vector_Muñeco.png" id="imagenRectangulo">
                    <div class="zonaTextorectangulo">
                        <p class="tituloPrincipal">Ningun mensaje fue encontrado</p>
                        <p class="tituloSecundario">Ingresa el texto que desees encriptar o desencriptar</p>
                    </div>
                </div>
                <div id="hide">
                </div>
                <button onclick="botonCopiar()" type="button" class="botonGriscopiar">Copiar</button>
            </section>
        </main>
<!--
        <footer class="autor">
            <p>Autor: Kevin Prendas Quirós - Sprint 01 Alura - 2023</p>
        </footer>-->

        <script>
            
            function codificar(){
                var texto = document.getElementById('mensaje').value;
                var codificado = '';
                
                for(contador = 0; contador < texto.length; contador++){

                    if(texto[contador] == 'a'){
                        codificado = codificado + 'ai';
                    }else if(texto[contador] == 'e'){
                        codificado = codificado + 'enter';
                    }else if(texto[contador] == 'i'){
                        codificado = codificado + 'imes';
                    }else if(texto[contador] == 'o'){
                        codificado = codificado + 'ober';
                    }else if(texto[contador] == 'u'){
                        codificado = codificado + 'ufat';
                    }else{
                        codificado = codificado + texto[contador];
                    }
                }
                return codificado;
            }

            function encriptar(){
                var mensajeInicial = codificar();
                var x = document.getElementById('hide');
                var y = document.getElementById('zonaTransformacion');
                var hayMensaje = document.getElementById('mensaje').value;

                if (hayMensaje != ''){
                    x.style.display = 'block';
                    x.textContent = mensajeInicial;
                    y.style.visibility = 'hidden';
                }else{
                    x.style.display = 'none';
                    y.style.visibility = 'visible';
                }

            }

            function descodificar(){
                var texto = document.getElementById('mensaje').value;
                var descodificado = '';
                
                while(texto != ''){

                    if(texto.slice(0,'ai'.length) == 'ai'){
                        descodificado = descodificado + 'a';
                        texto = texto.slice('ai'.length);
                    }else if(texto.slice(0,'enter'.length) == 'enter'){
                        descodificado = descodificado + 'e';
                        texto = texto.slice('enter'.length);
                    }else if(texto.slice(0,'imes'.length) == 'imes'){
                        descodificado = descodificado + 'i';
                        texto = texto.slice('imes'.length);
                    }else if(texto.slice(0,'ober'.length) == 'ober'){
                        descodificado = descodificado + 'o';
                        texto = texto.slice('ober'.length);
                    }else if(texto.slice(0,'ufat'.length) == 'ufat'){
                        descodificado = descodificado + 'u';
                        texto = texto.slice('ufat'.length);
                    }
                    else{
                        descodificado = descodificado + texto.slice(0,1);
                        texto = texto.slice(1);
                    }
                }
                return descodificado;
            }

            function desencriptar(){
                var mensajeFinal = descodificar();
                var x = document.getElementById('hide');
                var y = document.getElementById('zonaTransformacion');
                var hayMensaje = document.getElementById('mensaje').value;

                if (hayMensaje != ''){
                    x.style.display = 'block';
                    x.textContent = mensajeFinal;
                    y.style.visibility = 'hidden';
                }else{
                    x.style.display = 'none';
                    y.style.visibility = 'visible';
                }

            }

            function botonCopiar(){

                var copiarTexto = document.createRange();

                copiarTexto.selectNode(document.getElementById('hide'));
                window.getSelection().removeAllRanges();
                window.getSelection().addRange(copiarTexto);
                document.execCommand('copy');
                window.getSelection().removeAllRanges();
            }

        </script>
    </body>
</html>